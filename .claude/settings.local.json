{
  "permissions": {
    "allow": [
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT ''plaid_items'' as table_name, COUNT(*) as count FROM plaid_items WHERE user_id = 1\nUNION ALL\nSELECT ''accounts'', COUNT(*) FROM accounts WHERE user_id = 1\nUNION ALL  \nSELECT ''transactions'', COUNT(*) FROM transactions t JOIN accounts a ON t.account_id = a.id WHERE a.user_id = 1;\n\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  u.email,\n  COUNT(pi.id) as plaid_items,\n  COUNT(a.id) as accounts,\n  COUNT(t.id) as transactions\nFROM users u\nLEFT JOIN plaid_items pi ON u.id = pi.user_id\nLEFT JOIN accounts a ON u.id = a.user_id\nLEFT JOIN transactions t ON a.id = t.account_id\nWHERE u.email = ''lgg25@byu.edu''\nGROUP BY u.email;\n\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\n-- Remove the sample data I just added (user ID 2)\nDELETE FROM transactions WHERE account_id IN (SELECT id FROM accounts WHERE user_id = 2);\nDELETE FROM accounts WHERE user_id = 2;  \nDELETE FROM plaid_items WHERE user_id = 2;\nDELETE FROM users WHERE id = 2;\n\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  MIN(t.date) as earliest_transaction,\n  MAX(t.date) as latest_transaction,\n  COUNT(*) as total_transactions,\n  COUNT(CASE WHEN t.amount_cents > 0 THEN 1 END) as income_transactions,\n  COUNT(CASE WHEN t.amount_cents < 0 THEN 1 END) as expense_transactions\nFROM transactions t\nJOIN accounts a ON t.account_id = a.id\nJOIN users u ON a.user_id = u.id\nWHERE u.email = ''lgg25@byu.edu'';\n\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT email, password_hash FROM users WHERE email = ''lgg25@byu.edu'';\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"UPDATE users SET password_hash = ''$2a$10$N.zmdr9k7uOCQb2Va5sGBuZiXpHPWKvPSd8UL/Xg6Mb.qqrCMYVuS'' WHERE email = ''lgg25@byu.edu'';\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT u.email, COUNT(a.id) as account_count, COUNT(p.id) as plaid_item_count, COUNT(t.id) as transaction_count FROM users u LEFT JOIN accounts a ON u.id = a.user_id LEFT JOIN plaid_items p ON u.id = p.user_id LEFT JOIN transactions t ON a.id = t.account_id WHERE u.id = 1 GROUP BY u.id, u.email;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT institution_name, COUNT(*) as account_count FROM accounts WHERE user_id = 1 GROUP BY institution_name ORDER BY account_count DESC;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT COUNT(*) as total_accounts FROM accounts WHERE user_id = 1;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT COUNT(*) as total_plaid_items FROM plaid_items WHERE user_id = 1;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT COUNT(DISTINCT a.id) as unique_accounts, COUNT(a.id) as total_rows FROM accounts a WHERE a.user_id = 1;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT a.id as account_id, a.name, COUNT(t.id) as transaction_count FROM accounts a LEFT JOIN transactions t ON a.id = t.account_id WHERE a.user_id = 1 GROUP BY a.id, a.name ORDER BY a.id;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  u.email,\n  (SELECT COUNT(*) FROM accounts WHERE user_id = u.id) as account_count,\n  (SELECT COUNT(*) FROM plaid_items WHERE user_id = u.id) as plaid_item_count,\n  (SELECT COUNT(*) FROM transactions t JOIN accounts a ON t.account_id = a.id WHERE a.user_id = u.id) as transaction_count\nFROM users u WHERE u.id = 1;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"SELECT email, password_hash FROM users WHERE email = ''test@example.com'';\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"UPDATE users SET password_hash = ''$2a$10$P3gyfN2DR11m8RW2PfPAAeJd9owzdg3mlf4n2kZ4kJMP3CgdPYdfW'' WHERE email = ''lgg25@byu.edu'';\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"DELETE FROM users WHERE email = ''test@example.com'';\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"DELETE FROM refresh_tokens WHERE user_id = 3; DELETE FROM users WHERE email = ''test@example.com'';\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  CASE WHEN amount_cents > 0 THEN ''Income'' ELSE ''Expense'' END as type,\n  COUNT(*) as count,\n  SUM(ABS(amount_cents)) as total_cents,\n  ROUND(SUM(ABS(amount_cents)) / 100.0, 2) as total_dollars\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 \nGROUP BY CASE WHEN amount_cents > 0 THEN ''Income'' ELSE ''Expense'' END\nORDER BY type;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  date,\n  amount_cents,\n  ROUND(amount_cents / 100.0, 2) as amount_dollars,\n  name,\n  category_top,\n  category_sub\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 AND amount_cents > 0\nORDER BY date DESC;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  t.date,\n  t.amount_cents,\n  ROUND(t.amount_cents / 100.0, 2) as amount_dollars,\n  t.name,\n  t.category_top,\n  t.category_sub\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 AND t.amount_cents > 0\nORDER BY t.date DESC;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  t.date,\n  t.amount_cents / 100.0 as amount_dollars,\n  t.name,\n  t.category_top,\n  t.category_sub,\n  t.pending\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 AND t.amount_cents > 0\nORDER BY t.date;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  t.date,\n  t.amount_cents / 100.0 as amount_dollars,\n  t.name,\n  t.category_top,\n  t.category_sub,\n  CASE WHEN t.amount_cents > 0 THEN ''Income'' ELSE ''Expense'' END as type\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 \nORDER BY t.amount_cents DESC, t.date DESC\nLIMIT 10;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  t.date,\n  t.amount_cents / 100.0 as amount_dollars,\n  t.name,\n  t.category_top,\n  t.category_sub,\n  a.name as account_name\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 AND (\n  LOWER(t.name) LIKE ''%cozy%'' OR \n  LOWER(t.name) LIKE ''%eart%'' OR\n  LOWER(t.name) LIKE ''%dir dep%''\n)\nORDER BY t.date DESC;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\n-- Remove sample transactions I created earlier\nDELETE FROM transactions WHERE name LIKE ''%ACME Corp%'' OR name LIKE ''%Starbucks%'' OR name LIKE ''%Target%'' OR name LIKE ''%Amazon%'';\n\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  COUNT(*) as transaction_count,\n  COUNT(CASE WHEN t.amount_cents > 0 THEN 1 END) as income_count,\n  COUNT(CASE WHEN t.amount_cents < 0 THEN 1 END) as expense_count\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  a.name as account_name,\n  a.type,\n  a.subtype,\n  COUNT(t.id) as transaction_count,\n  COUNT(CASE WHEN t.amount_cents > 0 THEN 1 END) as income_count,\n  COUNT(CASE WHEN t.amount_cents < 0 THEN 1 END) as expense_count\nFROM accounts a \nLEFT JOIN transactions t ON a.id = t.account_id \nWHERE a.user_id = 1 \nGROUP BY a.id, a.name, a.type, a.subtype\nORDER BY transaction_count DESC;\")",
      "Bash(SPRING_PROFILES_ACTIVE=local psql -h localhost -U sand_dollar_user -d sand_dollar -c \"\nSELECT \n  t.date,\n  t.amount_cents / 100.0 as amount_dollars,\n  t.name,\n  t.category_top,\n  t.category_sub,\n  a.name as account_name\nFROM transactions t \nJOIN accounts a ON t.account_id = a.id \nWHERE a.user_id = 1 AND (\n  LOWER(t.name) LIKE ''%cozy%'' OR \n  LOWER(t.name) LIKE ''%eart%'' OR\n  LOWER(t.name) LIKE ''%dir dep%''\n)\nORDER BY t.date DESC\nLIMIT 10;\")"
    ],
    "deny": [],
    "ask": []
  }
}